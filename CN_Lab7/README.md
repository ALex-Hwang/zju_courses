# Computer Network Lab 7 Protocols

## 执行标准

### 约定的报文格式

### 首部

- function 用来表示何种报文
  1. get time
  2. get username
  3. send message

- 报文长度

- 源地址（0为来自于server，按照function来解读）
- 目的地址（0为发送给server，接受并解读）

每一部分都是一个int，所以一共**16**个字节。

> 两个地址都是指的是socketid

### 数据部分

char[]类型

### 尾部

结尾界定：通过首部中报文长度来指示何处是结尾。



### 数据包类型定义

#### 请求类型

- 时间请求：1
- 名字请求：2
- 获取列表：3
- 发送消息：4

#### 响应类型

- 时间：5
- 名字：6
- 列表：7

#### 指示请求

8



### 客户端要求



### 服务器端要求



---

## 10.8随想

1. 开服务器所支持的最大设备长度的数组，用来记录目前链接客户端的编号。
2. ~~int类型的size（名称可以定别的）用来记录目前链接客户端的数量。~~
3. 



### 目前一些修改点：

1. 客户端退出时要在数组中去掉这个客户端，所以是否可以使用读取进程的形式来进行名字链接获取。

2. 线程的buffer是否是公用的

   是的

---

## 10.9想法

1. 新建结构，用来存放客户端的相关信息以及是否断开链接。



